class drupal::drush {
  exec { "download-drush":
    cwd => "/root",
    command => "/usr/bin/wget http://ftp.drupal.org/files/projects/drush-7.x-5.8.tar.gz",
    creates => "/root/drush-7.x-5.8.tar.gz",
  }
  
  exec { "install-drush":
    cwd => "/var/www/drupal/sites/all/modules",
    command => "/bin/tar xvzf /root/drush-7.x-5.8.tar.gz",
    creates => "/var/www/drupal/sites/all/modules/drush",
    require => [ Exec["download-drush"], File["/var/www/drupal/sites/all/modules"] ],
  }
  
  file { "/usr/local/bin/drush":
    ensure => "/var/www/drupal/sites/all/modules/drush/drush",
  }
}
